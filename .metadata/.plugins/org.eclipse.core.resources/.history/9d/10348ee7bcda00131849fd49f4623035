package renameAutomator;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import java.util.Set;

public class Renamer {
	public Renamer() {// constructor
		
	}
	public void renameFilesInDirectory(String Path, Set<String> newNameList) throws IOException {
		File folder = new File(Path);
	    //File folder = new File("\\Projects\\sample");
	    File[] listOfFiles = folder.listFiles();
	    List<String> newNameArrayList = getNameArray(newNameList);
	    int pdfNamePositionCounter = 0;
	    for (int i = 0; i < listOfFiles.length; i++) {
	        if (listOfFiles[i].isFile() && isPDF(listOfFiles[i])) {
	        	String absolutePath = listOfFiles[i].getAbsolutePath();
	            File f = new File(absolutePath); 	
	            //File f = new File("c:\\Projects\\sample\\"+listOfFiles[i].getName()); 
	            //f.renameTo(new File("c:\\Projects\\sample\\"+i+".txt"));
	            String tempString;
	            tempString = newNameArrayList.get(pdfNamePositionCounter);
	            if(!f.renameTo(new File(Path + tempString +"pdf"))){
	            	System.out.println("rename failed");
	            }
	            System.out.println(tempString);
	            pdfNamePositionCounter++;
	        }
	    }
	}
	public List<String> getNameArray(Set<String> newNameList){
		List<String> NameList = new ArrayList<String>();
		NameList.clear();
		for (String s : newNameList) {
			NameList.add(s);
		}
		return NameList;
	}
	public boolean isPDF(File file) throws FileNotFoundException{
		 FileReader reader = new FileReader(file);
			Scanner input = new Scanner(reader);
		    while (input.hasNextLine()) {
		        final String checkline = input.nextLine();
		        if(checkline.contains("%PDF-")) { 
		        	//System.out.println("PDF" + file);
		        	return true;
		        }
		    }
		    return false;
		}
}
